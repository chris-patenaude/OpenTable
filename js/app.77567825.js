(function(){"use strict";var e={8762:function(e,n,t){var a=t(9242),o=t(3396);function u(e,n,t,a,u,l){const i=(0,o.up)("GameCanvas");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(i)])}const l={ref:"container"};function i(e,n,t,a,u,i){return(0,o.wg)(),(0,o.iD)("div",l,null,512)}t(7658);var r=t(4870),v=t(1843),c=t.n(v),s={setup(){const e=(0,r.iH)([]),n=(0,r.iH)(!1),t=(0,r.iH)(!1),a=(0,r.iH)(null),u=(0,r.iH)(null),l=(0,r.iH)(null),i=(0,r.iH)(null),v=(0,r.iH)(null),s=(0,r.iH)(null),f=(0,r.iH)(!1),h=(0,r.iH)({x:0,y:0});async function d(){console.log("GameCanvas: Drawing Grid..."),n.value=!1,e.value=[];const a=u.value.width(),o={x:-Math.floor(v.value.width()/a),y:-Math.floor(v.value.height()/a)};i.value={x:l.value.x+o.x*a,y:l.value.y+o.y*a};const r={rows:Math.floor(Math.max(2*v.value.width(),i.value.x+a)/a),cols:Math.floor(Math.max(2*v.value.height(),i.value.y+a)/a)},f=document.createElement("canvas");f.width=r.rows*a,f.height=r.cols*a;const h=f.getContext("2d");for(let n=0;n<r.rows;n++)for(let t=0;t<r.cols;t++){const o=i.value.x+n*a,u=i.value.y+t*a,l=w({x:o,y:u});e.value.push(l),h.strokeRect(o,u,a,a)}const d=new Image;d.onload=function(){const e=new(c().Image)({x:0,y:0,image:d,width:r.rows*a,height:r.cols*a});s.value.add(e),s.value.draw()},d.src=f.toDataURL(),v.value.width(r.rows*a),v.value.height(r.cols*a),u.value.remove(),t.value=!0,console.log("GameCanvas: Grid drawn.")}function w(e){const n=v.value.scaleX(),t=v.value.position();return{x:e.x*n+t.x,y:e.y*n+t.y}}function y(){if(!n.value)return;const e=v.value.getPointerPosition(),t=Math.min(e.x-l.value.x,e.y-l.value.y);u.value.width(t),u.value.height(t),s.value.batchDraw()}function x(){n.value=!0,l.value=v.value.getPointerPosition(),u.value=new(c().Rect)({x:l.value.x,y:l.value.y,width:0,height:0,stroke:"black",strokeWidth:2,draggable:!0}),s.value.add(u.value)}function g(){v.value=new(c().Stage)({container:a.value,width:window.innerWidth,height:window.innerHeight}),s.value=new(c().Layer),v.value.add(s.value);const e=new window.Image;e.src="https://i.etsystatic.com/18388031/r/il/8b7a49/2796267092/il_fullxfull.2796267092_aezx.jpg",e.onload=()=>{const n=new(c().Image)({x:0,y:0,image:e,width:v.value.width(),height:v.value.height()});s.value.add(n),s.value.draw()}}return(0,o.bv)((()=>{g(),v.value.on("mousedown",(()=>{if(!t.value)return void x();const e=v.value.getPointerPosition();h.value={x:e.x,y:e.y},f.value=!0})),v.value.on("mousemove",(()=>{if(!t.value)return void y();if(!f.value)return;const e=v.value.getPointerPosition(),n=e.x-h.value.x,a=e.y-h.value.y,o={x:v.value.x()+n,y:v.value.y()+a};v.value.position(o),v.value.batchDraw(),h.value={x:e.x,y:e.y}})),v.value.on("mouseup",(()=>{t.value?f.value=!1:d()})),v.value.on("wheel",(e=>{e.evt.preventDefault();const n=v.value.scaleX(),t=v.value.getPointerPosition(),a={x:(t.x-v.value.x())/n,y:(t.y-v.value.y())/n},o=e.evt.deltaY>0?1.1*n:.9*n;v.value.scale({x:o,y:o});const u={x:t.x-a.x*o,y:t.y-a.y*o};v.value.position(u),v.value.batchDraw()}))})),{container:a}}},f=t(89);const h=(0,f.Z)(s,[["render",i]]);var d=h,w={name:"App",components:{GameCanvas:d}};const y=(0,f.Z)(w,[["render",u]]);var x=y;(0,a.ri)(x).mount("#app")}},n={};function t(a){var o=n[a];if(void 0!==o)return o.exports;var u=n[a]={exports:{}};return e[a].call(u.exports,u,u.exports,t),u.exports}t.m=e,function(){var e=[];t.O=function(n,a,o,u){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],u=e[c][2];for(var i=!0,r=0;r<a.length;r++)(!1&u||l>=u)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(i=!1,u<l&&(l=u));if(i){e.splice(c--,1);var v=o();void 0!==v&&(n=v)}}return n}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[a,o,u]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,a){var o,u,l=a[0],i=a[1],r=a[2],v=0;if(l.some((function(n){return 0!==e[n]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(r)var c=r(t)}for(n&&n(a);v<l.length;v++)u=l[v],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(c)},a=self["webpackChunkopentable"]=self["webpackChunkopentable"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(8762)}));a=t.O(a)})();
//# sourceMappingURL=app.77567825.js.map